import{a as y,b as p}from"./chunk-XYW4OUFN.mjs";var g=async t=>{switch(t.headers.get("Content-Type")?.split(";")[0]){case"application/json":return t.json();case"application/octet-stream":return t.arrayBuffer();case"multipart/form-data":{let e=await t.formData(),r={};return e.forEach((c,a)=>{r[a]=c}),r}}return t.text().then(p)},T=async(t,n)=>{let e=await g(t);return t.status>300?{data:null,status:t.status,headers:t.headers,retry:n,error:new y(t.status,e)}:{data:e,error:null,status:t.status,headers:t.headers,retry:n}},w=(t,n)=>(e,{query:r,params:c,body:a,...s}={})=>{c&&Object.entries(c).forEach(([o,E])=>{e=e.replace(`:${o}`,E)});let i=s.headers?.["Content-Type"];if(!i||i==="application/json")try{a=JSON.stringify(a)}catch{}let f=n?.fetcher||globalThis.fetch,d=r?`?${new URLSearchParams(r).toString()}`:"",u=`${t}${e}${d}`,l=a?{"content-type":"application/json",...s.headers}:s.headers,m={...s,method:s.method?.toUpperCase()||"GET",headers:l,body:a},h=()=>f(u,m).then(o=>T(o,h));return h()};export{w as a};
